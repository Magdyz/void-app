ktor {
    deployment {
        port = 8080
        port = ${?PORT}

        # For production, use:
        # sslPort = 8443
    }

    application {
        modules = [ com.void.server.ApplicationKt.module ]
    }
}

void {
    # Redis Configuration
    redis {
        host = "localhost"
        host = ${?REDIS_HOST}

        port = 6379
        port = ${?REDIS_PORT}

        # Optional Redis password
        password = ${?REDIS_PASSWORD}

        # TTL for FCM tokens (30 days in seconds)
        tokenTtl = 2592000

        # TTL for message queue (7 days in seconds)
        messageTtl = 604800
    }

    # Firebase Configuration
    firebase {
        # Path to Firebase service account JSON
        serviceAccountPath = "firebase-service-account.json"
        serviceAccountPath = ${?FIREBASE_SERVICE_ACCOUNT_PATH}
    }

    # Security Configuration
    security {
        # Random jitter range for timing attack mitigation (in milliseconds)
        jitterMinMs = 50
        jitterMaxMs = 200

        # Signature verification timeout (in milliseconds)
        signatureTimeoutMs = 60000
    }

    # Privacy Configuration
    privacy {
        # Disable IP logging
        logIpAddresses = false

        # Enable decoy tickles (random noise)
        enableDecoyTickles = false
        decoyTickleIntervalMs = 300000
    }
}
